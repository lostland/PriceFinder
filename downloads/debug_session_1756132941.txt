================================================================================
🔍 AGODA MAGIC PRICE - 상세 디버그 세션
================================================================================
📅 세션 시작: 2025-08-25 14:42:21
🌐 원본 URL: https://www.agoda.com/ko-kr/galleria-10-sukhumvit-by-compass-hospitality/hotel/bangkok-th.html?countryId=106&finalPriceView=1&isShowMobileAppPrice=false&cid=1729471&numberOfBedrooms=&familyMode=false&adults=2&children=0&rooms=1&maxRooms=0&checkIn=2025-09-10&isCalendarCallout=false&childAges=&numberOfGuest=0&missingChildAges=false&travellerType=1&showReviewSubmissionEntry=false&currencyCode=KRW&isFreeOccSearch=false&los=1&searchrequestid=85c08a46-cfe1-43d2-a2b6-f2cfe97594d8
💱 원본 통화: KRW
📊 처리할 CID 총 개수: 17

================================================================================
🚀 스크래핑 시작
================================================================================

[14:42:21] 
============================================================
[14:42:21] 📍 단계 1/17: 시크릿창 (CID: -1)
[14:42:21] 🌐 접속 URL: https://www.agoda.com/ko-kr/galleria-10-sukhumvit-by-compass-hospitality/hotel/bangkok-th.html?countryId=106&finalPriceView=1&isShowMobileAppPrice=false&familyMode=false&adults=2&children=0&maxRooms=0&rooms=1&checkIn=2025-09-10&isCalendarCallout=false&childAges=&numberOfGuest=0&missingChildAges=false&travellerType=1&showReviewSubmissionEntry=false&currencyCode=KRW&isFreeOccSearch=false&los=1&searchrequestid=85c08a46-cfe1-43d2-a2b6-f2cfe97594d8&cid=-1&numberOfBedrooms=
[14:42:21] ============================================================
[14:42:22] 🔧 Chrome 브라우저 옵션 설정 중...
[14:42:22] ✅ Chrome 옵션 설정 완료
[14:42:22] 🚀 웹페이지 접속 시작...
[14:42:22] 🔍 환경 진단 시작...
[14:42:22] 🌐 Chromium 버전: Chromium 138.0.7204.100
[14:42:22] 🚗 ChromeDriver 버전: ChromeDriver 138.0.7204.100 (5f45b4744e3d5ba82c2ca6d942f1e7a516110752-refs/tags/138.0.7204.100@{#0})
[14:42:22] 🐍 Python 버전: 3.11.13 (main, Jun  3 2025, 18:38:25) [GCC 14.3.0]
[14:42:22] 💻 작업 디렉토리: /home/runner/workspace
[14:42:22] 🔒 실행 사용자: runner
[14:42:22] 💾 메모리 상태:
               total        used        free      shared  buff/cache   available
Mem:            62Gi        44Gi        12Gi        30Mi       6.2Gi        18Gi
Swap:             0B          0B          0B

[14:42:22] ℹ️ 실행 중인 Chrome 프로세스 없음
[14:42:22] ⚡ Chrome 드라이버 실행 중...
[14:42:23] 🖥️ 데스크톱 사이트 접속용 스크립트 실행...
[14:42:23] 🖥️ 데스크톱 아고다 페이지 로딩 및 모니터링 시작...
[14:42:23] 🌐 데스크톱 URL: https://www.agoda.com/ko-kr/galleria-10-sukhumvit-by-compass-hospitality/hotel/bangkok-th.html?count...
[14:42:33] ❌ 데스크톱 아고다 페이지 로딩 실패: Message: timeout: Timed out receiving message from renderer: 9.859
  (Session info: chrome=138.0.7204.100)
Stacktrace:
#0 0x562c294e854e base::debug::StackTrace::StackTrace()
#1 0x562c28f70736 Status::Status()
#2 0x562c28f58f45 DevToolsClientImpl::ProcessNextMessage()
#3 0x562c28f58cc5 DevToolsClientImpl::ProcessNextMessage()
#4 0x562c28f56f16 DevToolsClientImpl::SendCommandInternal()
#5 0x562c28f573c4 DevToolsClientImpl::SendCommandAndGetResultWithTimeout()
#6 0x562c28f6c107 NavigationTracker::IsPendingNavigation()
#7 0x562c28f7efef WebViewImpl::IsNotPendingNavigation()
#8 0x562c28f8562b base::internal::Invoker<>::Run()
#9 0x562c28f57a4f DevToolsClientImpl::HandleEventsUntil()
#10 0x562c28f7ec0a WebViewImpl::WaitForPendingNavigations()
#11 0x562c2900a67e ExecuteWindowCommand()
#12 0x562c28fe73b3 base::internal::Invoker<>::Run()
#13 0x562c28fb2b31 _ZN12_GLOBAL__N_136ExecuteSessionCommandOnSessionThreadEPKcRKNSt4__Cr12basic_stringIcNS2_11char_traitsIcEENS2_9allocatorIcEEEERKN4base17RepeatingCallbackIF6StatusP7SessionRKNSB_9DictValueEPNS2_10unique_ptrINSB_5ValueENS2_14default_deleteISK_EEEEEEEbbSI_13scoped_refptrINSB_22SingleThreadTaskRunnerEERKNSC_IFvRKSD_SN_SA_bEEE.c2d79fcaf9d3f4de329075124162d84e
#14 0x562c28fb3841 base::internal::Invoker<>::RunOnce()
#15 0x562c294b6241 base::TaskAnnotator::RunTaskImpl()
#16 0x562c294b9781 base::sequence_manager::internal::ThreadControllerWithMessagePumpImpl::DoWorkImpl()
#17 0x562c294b91d8 base::sequence_manager::internal::ThreadControllerWithMessagePumpImpl::DoWork()
#18 0x562c294b9c25 base::sequence_manager::internal::ThreadControllerWithMessagePumpImpl::DoWork()
#19 0x562c294a24db base::MessagePumpDefault::Run()
#20 0x562c294b9ff9 base::sequence_manager::internal::ThreadControllerWithMessagePumpImpl::Run()
#21 0x562c2948bbf5 base::RunLoop::Run()
#22 0x562c294d6858 base::Thread::Run()
#23 0x562c294d6a7d base::Thread::ThreadMain()
#24 0x562c294e78ec _ZN4base12_GLOBAL__N_110ThreadFuncEPv.a67435033112019129ad5c28ddc47327
#25 0x7f14d5f58ea3 start_thread

[14:42:33] 🧪 네이버 테스트 시도...
[14:42:35] ✅ 네이버 테스트 성공: NAVER
[14:42:35] 🔍 결론: 아고다만 접속 차단당하고 있습니다!
[14:42:35] 🔚 Chrome 드라이버 종료...
[14:42:35] ✅ Chrome 드라이버 정상 종료
[14:42:36] ⏱️ 총 페이지 로딩 시간: 14.16초
[14:42:36] 🔍 HTML 파싱 시작...
[14:42:36] 📊 추출된 텍스트: 9 글자, 23 bytes
[14:42:36] 📝 페이지 텍스트 샘플: 페이지 로딩 실패...
[14:42:36] 💰 가격 추출 시작...
[14:42:36] 🔍 KRW(원화) 패턴 검색 중...
[14:42:36] ❌ 스크래핑 중 오류 발생: cannot access local variable 're' where it is not associated with a value
[14:42:36] 📋 상세 오류:
Traceback (most recent call last):
  File "/home/runner/workspace/scraper.py", line 362, in scrape_prices_simple
    matches = re.finditer(pattern, all_text)
              ^^
UnboundLocalError: cannot access local variable 're' where it is not associated with a value

